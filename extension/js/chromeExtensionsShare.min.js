function UserExtensions(){this.enabled={};this.disabled={};this.apps={};this.countSelected=function(){return Object.keys(this.enabled).length+Object.keys(this.disabled).length+Object.keys(this.apps).length};this.countEnabled=function(){return Object.keys(this.enabled).length};this.countDisabled=function(){return Object.keys(this.disabled).length};this.countApps=function(){return Object.keys(this.apps).length}}
function ExtensionsShare(){this._extensionInfos=new UserExtensions;this._lastExportType="text";this._template=null;this.setTemplate=function(a){this._template=a};this.exportTo=function(a){console.log("exporting to:"+a);var d=$("#description:checked").val();this._lastExportType=a;var c=new UserExtensions,b;for(b in this._extensionInfos.enabled){var e=this._extensionInfos.enabled[b];if($("#"+e.id).hasClass("selected"))c.enabled[e.id]=e}for(b in this._extensionInfos.disabled){e=this._extensionInfos.disabled[b];
if($("#"+e.id).hasClass("selected"))c.disabled[e.id]=e}for(b in this._extensionInfos.apps){e=this._extensionInfos.apps[b];if($("#"+e.id).hasClass("selected"))c.apps[e.id]=e}if(c.countSelected()==0)alert(_i18n("alert_no_extensions_selected"));else{b="";_gaq.push(["_trackPageview","/extensions/export/"+a+"/"+c.length+"/"]);switch(a){case "bbcode":b=generateBBCode(c,d);break;case "html":b=generateHTML(c,d);break;case "text":b=generateText(c,d);break;case "wiki":b=generateWiki(c,d)}$("#nav2 li.selected").removeClass("selected");
if(b!=undefined&&b!=""){$("#export").val(b);$("#nav2 li."+a).addClass("selected");$("#dialog-modal").dialog({modal:true,draggable:false,position:"center",width:800,height:600,closeOnEscape:true})}}};this.reExport=function(){this.exportTo(this._lastExportType)};this.populateExtensions=function(a){this._extensionInfos=new UserExtensions;for(var d in a){var c=a[d];if(c.isApp)this._extensionInfos.apps[c.id]=c;else if(c.enabled)this._extensionInfos.enabled[c.id]=c;else this._extensionInfos.disabled[c.id]=
c}$(".extension",this._template).removeClass("enabled").removeClass("app").removeClass("disabled");$(".content").append(getSectionHeader(_i18n("section_header_title_enabled_extensions"),this._extensionInfos.countEnabled()));for(d in this._extensionInfos.enabled)$(".content").append(populateData(this._template,this._extensionInfos.enabled[d]));$(".extension",this._template).removeClass("enabled").removeClass("app").removeClass("disabled");$(".content").append(getSectionHeader(_i18n("section_header_title_disabled_extensions"),
this._extensionInfos.countDisabled()));for(d in this._extensionInfos.disabled)$(".content").append(populateData(this._template,this._extensionInfos.disabled[d]));$(".extension",this._template).removeClass("enabled").removeClass("app").removeClass("disabled");$(".content").append(getSectionHeader(_i18n("section_header_title_apps"),this._extensionInfos.countApps()));for(d in this._extensionInfos.apps)$(".content").append(populateData(this._template,this._extensionInfos.apps[d]));return this._extensionInfos.countSelected()};
this.getLastExportType=function(){return this._lastExportType};this.getExtensionInfoById=function(a){if(typeof this._extensionInfos.enabled[a]!="undefined")return this._extensionInfos.enabled[a];if(typeof this._extensionInfos.disabled[a]!="undefined")return this._extensionInfos.disabled[a];if(typeof this._extensionInfos.apps[a]!="undefined")return this._extensionInfos.apps[a]}}function selectAll(a){a?$(".extension").addClass("selected"):$(".extension").removeClass("selected")}
function select(a){_gaq.push(["_trackPageview","/extensions/select/"+a+"/"]);switch(a){case "all":$(".extension").addClass("selected");break;case "none":$(".extension").removeClass("selected");break;case "reverse":$(".extension").each(function(){$(this).hasClass("selected")?$(this).removeClass("selected"):$(this).addClass("selected")})}return false}
function sendTo(){_gaq.push(["_trackPageview","/extensions/export/gmail/"]);window.open("https://mail.google.com/mail/?view=cm&fs=1&tf=1&su="+_subject+"&body="+encodeURIComponent($("#export").val()))}
function populateData(a,d){$(".extension",a).attr("id",d.id);d.enabled?$(".extension",a).addClass("enabled"):$(".extension",a).addClass("disabled");d.isApp||$(".extension",a).addClass("app");$("#name2",a).hide();$("#name",a).html(d.name);$(".inspectPopupNote",a).html(d.description);$(".extension-description",a).html(d.description);$("#homepageUrl",a).attr("href","https://chrome.google.com/webstore/detail/"+d.id);$("#version",a).html(d.version);$("#enabled",a).hide();$("#id",a).html(d.id);var c=0,
b="images/extension_unknown.png";if(d.enabled&&d.icons!=undefined&&d.icons.length)for(var e in d.icons)if(c<d.icons[e].size){c=d.icons[e].size;b=d.icons[e].url}$("#icon",a).attr("src",b);return a.html()}
function generateBBCode(a,d){var c=new Date,b="";b=b+"[b]"+_i18n("label_export_generated")+"[/b] "+c.toGMTString()+"\n";b=b+"[b]"+_i18n("label_export_user_agent")+"[/b] "+navigator.userAgent+"\n";b+="\n";b=b+"[b]"+_i18n("label_export_extensions")+"[/b] "+Object.keys(a.enabled).length+"\n";for(var e in a.enabled){c=a.enabled[e];b+=getBBCodeData(c,d)}b=b+"[b]"+_i18n("label_export_extensions_disabled")+"[/b] "+Object.keys(a.disabled).length+"\n";for(e in a.disabled){c=a.disabled[e];b+=getBBCodeData(c,
d)}b=b+"[b]"+_i18n("label_export_apps")+"[/b] "+Object.keys(a.apps).length+"\n";for(e in a.apps){c=a.apps[e];b+=getBBCodeData(c,d)}return b=b+"\n"+_i18n("label_exported_via_bbcode")+"\n"}function getBBCodeData(a,d){var c="- [url=https://chrome.google.com/webstore/detail/"+a.id+"]"+a.name+"[/url] v"+a.version+"\n";if(d&&a.description!=undefined&&a.description!="")c=c+" [i]"+a.description+"[/i]\n";c+="\n";return c}
function generateHTML(a,d){var c=new Date,b="";b+='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">\n';b=b+"<html><head><title>"+_i18n("title_export_html")+"</title>\n";b+='<meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n';b+='<base target="_blank">\n';b+="</head>\n";b+="<body>\n";b=b+"<b>"+_i18n("label_export_generated")+"</b> "+c.toGMTString()+"<br>\n";b=b+"<b>"+_i18n("label_export_user_agent")+"</b> "+navigator.userAgent+"<br>\n";b+="<br>\n";b=b+"<b>"+_i18n("label_export_extensions")+
"</b> "+Object.keys(a.enabled).length+"";b+="<ul>";for(var e in a.enabled){c=a.enabled[e];b+=getHTMLData(c,d)}b+="</ul>\n";b+="<br>\n";b=b+"<b>"+_i18n("label_export_extensions_disabled")+"</b> "+Object.keys(a.disabled).length+"";b+="<ul>";for(e in a.disabled){c=a.disabled[e];b+=getHTMLData(c,d)}b+="</ul>\n";b+="<br>\n";b=b+"<b>"+_i18n("label_export_apps")+"</b> "+Object.keys(a.apps).length+"";b+="<ul>";for(e in a.apps){c=a.apps[e];b+=getHTMLData(c,d)}b+="</ul>\n";b=b+"<br><br>"+_i18n("label_exported_via_html")+
"\n";b+="</body></html>\n";return b}function getHTMLData(a,d){var c='<li> <a href="https://chrome.google.com/webstore/detail/'+a.id+'" target="_blank">'+a.name+"</a> v"+a.version;if(d&&a.description!=undefined&&a.description!="")c=c+"<br><i>"+a.description+"</i>";c+="</li>\n";c+="\n";return c}
function generateText(a,d){var c=new Date,b="";b=b+_i18n("label_export_generated")+" "+c.toGMTString()+"\n";b=b+_i18n("label_export_user_agent")+" "+navigator.userAgent+"\n";b+="\n";b=b+_i18n("label_export_extensions")+" "+a.countEnabled()+"\n";for(var e in a.enabled){c=a.enabled[e];b+=getDescriptionText(c,d)}b=b+"\n"+_i18n("label_export_extensions_disabled")+" "+a.countDisabled()+"\n";for(e in a.disabled){c=a.disabled[e];b+=getDescriptionText(c,d)}b=b+"\n"+_i18n("label_export_apps")+" "+a.countApps()+
"\n";for(e in a.apps){c=a.apps[e];b+=getDescriptionText(c,d)}return b=b+"\n\n"+_i18n("label_exported_via_text")+"\n"}function getDescriptionText(a,d){var c="- "+a.name+" v"+a.version+": https://chrome.google.com/webstore/detail/"+a.id+"\n";if(d)c=c+"   "+a.description+"\n";return c}
function getTextData(a,d){var c="- [url=https://chrome.google.com/webstore/detail/"+a.id+"]"+a.name+"[/url] v"+a.version+"\n";if(d&&a.description!=undefined&&a.description!="")c=c+" [i]"+a.description+"[/i]\n";c+="\n";return c}
function generateWiki(a,d){var c=new Date,b="";b=b+"'''"+_i18n("label_export_generated")+"''' "+c.toGMTString()+"\n\n";b=b+"'''"+_i18n("label_export_user_agent")+"''' "+navigator.userAgent+"\n";b+="\n";b=b+"'''"+_i18n("label_export_extensions")+" "+a.countEnabled()+"''' \n";for(var e in a.enabled){c=a.enabled[e];b+=getWikiData(c,d)}b=b+"\n'''"+_i18n("label_export_extensions_disabled")+" "+a.countDisabled()+"'''\n";for(e in a.disabled){c=a.disabled[e];b+=getWikiData(c,d)}b=b+"\n'''"+_i18n("label_export_apps")+
" "+a.countApps()+"'''\n";for(e in a.apps){c=a.apps[e];b+=getWikiData(c,d)}return b=b+"\n\n"+_i18n("label_exported_via_wiki")+"\n"}function getWikiData(a,d){var c="* [https://chrome.google.com/webstore/detail/"+a.id+" "+a.name+"] v"+a.version+"\n";if(d&&a.description!=undefined&&a.description!="")c=c+":''"+a.description+"''\n";c+="\n";return c}
function getSectionHeader(a,d){return'<div id="container" class="vbox-container" style="font-size: 100%;"> <div class="wbox" style="padding-right: 5px;"> <div class="section-header">       <table cellpadding="0" cellspacing="0" width="100%">      <tbody><tr valign="center">         <td>           <span class="section-header-title">'+a+'</span>          <span class="section-header-title">(<span id="extensions_length">'+d+'</span>)</span>        </td>        <td width="18" padding=""></td>         <td width="50" align="right">         </td>      </tr>       </tbody></table></div></div></div>'}
;